<html>
    <head>
        <title>KOREK</title>
        <link rel="icon" href="images/koreklogo.jpg">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
    <style>
        .pdfpng{
            height: 30px;
             width:30px;
            }
        .founds{
            font-size: 12px;
            color: #808080;
        }
        .resLinks{
            color:#1906A7;
        }
    </style>
    </head>
    <body>
<div class="container">
    <div class="row">
        <h3 class="text-center">STUDENT GRADEING SEARCH ENGINE</h3>
        
    </div>
<hr>
    <form id="pdfSearchKey">
    <div class="row">
        <div class="col-5 offset-3">  
        <input class="form-control" name="searchKey" type="text" id="searchKey">
        <p id="insetMsg"></p>  
        </div>
          <div class="col-3">
            <button type="button" onclick="docsearchfunc()" id="searchbtn" class="btn btn-primary">
                <i class="fas fa-search"></i> Search</button>
              
          </div>
        
        </div>
        </form>
        <hr>
        <script>
$(function() { $("form").submit(function() { return false; }); });
    
$(document).keypress(function (e) {if ((e.which && e.which == 13) || (e.keyCode && e.keyCode == 13)) { docsearchfunc();
}
});
function formreset(){
    $('#pdfSearchKey')[0].reset();
}

        function docsearchfunc(){
            $( "#searchbtn" ).prop( "disabled", true );
            var skeyword=$('#searchKey').val().trim();;
            if(skeyword == ''){
            $( "#searchbtn" ).prop( "disabled", false );
            $("#searchResult").html("");
                return false;
            }
  
$("#searchResult").html("<center><i class='fas fa-spinner fa-3x fa-spin' style='color:#4285F4;'></i></center>");
            
            $.ajax({
            url: 'http://127.0.0.1:8000/api/searchKey/'+skeyword,
            success: function(isFind){
                isFind=JSON.parse(isFind);
                if(isFind.length > 0){
                $( "#searchbtn" ).prop( "disabled", false );
                $("#searchResult").html('');

for(let i = 0; i < isFind.length; i++) {
        $("#searchResult").append("<div class='row'><a class='resLinks' target='_BLANK' href='http://127.0.0.1:8000/api/download/"+isFind[i][0]+"' >"+isFind[i][0]+" </a></div>");
            for(let j = 0; j < isFind[i][1].length; j++) {
                    $("#searchResult").append("<span class='founds'>"+isFind[i][1][j]+"</span>");
                                                        }
$("#searchResult").append("<hr>");
} 
                }
                else{
        $("#searchResult").text("No results found !!");
                    $( "#searchbtn" ).prop( "disabled", false );
                }
}
                    });
        }
         
          </script>
    

<div id="searchResult" > </div>

</div>

    </body>
</html>